<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Solver Tuning for Beginners | Shengfei "Gabriel" Yin, Ph.D. </title> <meta name="author" content="Shengfei " gabriel yin ph.d.> <meta name="description" content="Beginner's guide on how to effectively make your optimization solver a pro"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&amp;display=swap" rel="stylesheet"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/header.jpg?a78fef4aecb1568d1627426875c8af64"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://gabrieledogawa.github.io/projects/solver_tuning_for_beginners_save/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Shengfei</span> "Gabriel" Yin, Ph.D. </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/work_life/">Work &amp; Life </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="nav-item "> <a class="nav-link" href="/family/">Family </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Solver Tuning for Beginners</h1> <p class="post-description">Beginner's guide on how to effectively make your optimization solver a pro</p> </header> <article> <p><a href="https://www.ibm.com/products/ilog-cplex-optimization-studio" rel="external nofollow noopener" target="_blank">IBM ILOG CPLEX</a> is one of the most powerful commercial solvers in the world widely used in industry and academia. However, as we all know, <span class="dashed-popover" data-toggle="popover" data-placement="top" title="Mixed-Integer Programming">MIP</span> problems could be extremely hard to solve especially when the problem size goes wild or the problem falls into some specific structures like near-singular constraint space. In these cases, using particular solver options (often referred to as <b>solver tuning</b>) could yield surprisingly efficient solution processes. This page offers a fundamental guidance for beginners facing excessively long solution times in CPLEX. The tuning procedures are also applicable to other solvers, such as FICO-Xpress and Gurobi, as they typically share similar solver options (arguably Gurobi might have the best performance, but still case dependent).</p> <h3 id="preface">Preface</h3> <p>To be clear at the beginning, the tuning procedure provided in this guide is very <b>subjective</b>. All solvers in fact largely depend on many sophisticated heuristics to initialize the algorithm, preprocess the searching, and polish the solutions. Refer to <a href="https://www.gurobi.com/resources/mixed-integer-programming-mip-a-primer-on-the-basics/" rel="external nofollow noopener" target="_blank">this documentation</a> from Gurobi (yes, they get a far better and user-friendlier doc!) for more details regarding how solver works towards solving MIP. What we are technically doing for the solver tuning is to modify the heuristic methods (kind of adding another self-designed heuristic onto the existing ones). So it should be kept in mind that one good solver tuning result is <u>with probability zero</u> applicable to all scenarios, even if the scenarios are alike. But it could hold substantial merits in sequential or parallel problem solving in large quantities for identical problem structure (like how GPU works for us).</p> <p>It should be noted that the example case we are talking in this guide is a <span class="dashed-popover" data-toggle="popover" data-placement="top" title="Mixed-Integer Linear Programming">MILP</span> problem with millions of constraints &amp; variables for <a href="https://en.wikipedia.org/wiki/Unit_commitment_problem_in_electrical_power_production" rel="external nofollow noopener" target="_blank">unit commitment</a> (UC). Compared to other MIP applications, the UC problem has the following unique features:</p> <ul> <li> <b>Extremely high dimensionality</b> due to the tight coupling between the integer and continuous variables.</li> <li> <b>Stringent time coupling constraints</b> across the whole problem, which renders the feasibility space overwhelmingly large.</li> <li> <b>Heavily sparse yet redundant constraints with highly symmetric formulation structure</b>, leading to high dual degeneracy risk.</li> </ul> <p>Those unique features give us an initial idea on how we should tell the solver to customize its solution procedure.</p> <h3 id="inspect-the-optimization-log">Inspect the Optimization Log</h3> <p>We should always start with the <b>default</b> solver setting. After obtaining the optimization log, it is very possible to gain a lot better understanding on the problem when checking the log. When doing so, ask the following questions:</p> <h4 id="does-the-solver-have-a-hard-time-finding-incumbents">Does the solver have a hard time finding incumbents?</h4> <p>This might be the most common issue we would face when solving large-scale UC problems. <a href="https://www.ibm.com/docs/en/cofz/12.9.0?topic=optimizer-when-integer-solution-is-found-incumbent" rel="external nofollow noopener" target="_blank">Incumbent</a> is the best feasible solution found so far that could satisfy all constraints in the model, serving as an lower bound (in maximization problem) when calculating the MIP gap. So when the solver takes minutes or even hours finding the next improved incumbent, it means that the model is extremely near-infeasible or the LP relaxation is too weak. Then, there are two potential ways to speed up the searching if you don‚Äôt want to change (simplify) your model.</p> <ul> <li>Set the solver option <b>MIP emphasis</b> to <u>emphasize feasibility over optimality</u>:<br> <code class="language-plaintext highlighter-rouge">cpx.parameters.emphasis.mip.set(1)</code>.<br> Doing so commands the solver to use more aggressive branching strategies to find feasible solutions as soon as possible. This is also one of the most impactful meta options that one should usually try first when the solver performance is poor.</li> <li>Set the solver option <b>variable selection</b> to <u>strong branching</u>:<br> <code class="language-plaintext highlighter-rouge">cpx.parameters.mip.strategy.variableselect.set(3)</code>.<br> This setting causes variable selection based on partially solving a number of subproblems with tentative branches to see which branch is most promising. This is often effective on large, difficult problems.</li> <li>Set the solver option <b>matrix scaling</b> to <u>more aggressive scaling</u>:<br> <code class="language-plaintext highlighter-rouge">cpx.parameters.preprocessing.scaling.set(1)</code>.<br> Sometimes the model could struggle with staying feasible during the solution procedure due to numerical stability or large differences in coefficient magnitudes. Hence, using more aggressive scaling might appear to be effective.</li> </ul> <h4 id="does-the-solver-spend-too-much-time-in-presolve">Does the solver spend too much time in Presolve?</h4> <p><a href="https://support.gurobi.com/hc/en-us/articles/360024738352-How-does-presolve-work" rel="external nofollow noopener" target="_blank">Presolve</a> is a significant procedure that the solver usually first enters in the solving stage, where it prunes the model with redundant constraints &amp; variables and prepares refined branches and nodes for further inspection. However, the abundance of tight physical constraints and model symmetry in large-scale UC problems could commonly jeopardize the Presolve stage. When the Presolve stage takes a majority of the total solution time, try the following solver options:</p> <ul> <li>Set the solver option <b>node presolve selector</b> to <u>aggressive node probing</u>:<br> <code class="language-plaintext highlighter-rouge">cpx.parameters.mip.strategy.presolvenode.set(3)</code><br> Setting this commands the solver to perform the maximally aggressive level of Presolve performed at the node level during the branch solution search.</li> </ul> <p>In fact, when finding the solver gets stuck in Presolve, the best practice should be to sit back and inspect the model again, trying to prune unnecessary constraints and variables manually.</p> <h4 id="does-the-solver-struggle-with-reducing-the-gap-at-the-initial-stage">Does the solver struggle with reducing the gap at the initial stage?</h4> <p>Somestimes the solver could have difficulty quickly improving the objective value or finding good-quality feasible solutions early in the process. Usually, Presolve could significantly improve the early-stage solution hunting, but for large-scale problems it could be way insufficent for solver to crack the nutshell at the beginning due to model symmetry, weak LP relaxation, and large constraint space. This issue could be detrimental to solution time even rendering the solver time-out. Fortunately, there are several effective solver options that could speed up.</p> <ul> <li>Set the solver option <b>relative MIP gap before starting to polish a solution</b> to <u>some high percentage value</u>:<br> <code class="language-plaintext highlighter-rouge">cpx.parameters.mip.tolerances.mipgappolish.set(0.9)</code><br> <a href="https://www.ibm.com/docs/en/icos/22.1.1?topic=heuristics-solution-polishing" rel="external nofollow noopener" target="_blank">Solution polishing</a> can yield better solutions in situations where good solutions are otherwise hard to find. More time-intensive than other heuristics, solution polishing is actually a variety of branch-and-cut that works after an initial solution is available. Because of the high cost entailed by solution polishing, it is not called throughout branch-and-cut like other heuristics. So basically it only gets used when user calls it. As an additional step after branch-and-cut, solution polishing can potentially improve the incumbent quickly. Hence, one could enable this option in large percentage value to start polishing when the solver gets stuck early. Still, it is particularly noteworthy that the polishing algorithm does not always work fine. In fact, it could in some scenarios even worsen the solution searching without any benefit. It inherently is a time-intensive and more aggressive refinement procedure that exploits and focuses on the neighbor nodes of the current incumbent. Thus, when to activate the polishing is critical when tuning sophisticated problems.</li> <li>Set the solver option <b>MIP starting value</b> to <u>set discrete variable values and use check feasibility mipstart level</u>:<br> <code class="language-plaintext highlighter-rouge">cpx.parameters.mip.start.set(2)</code><br> This option controls the use of advanced starting values for MIP. A setting of 2 indicates that the values should be checked to see if they provide an integer feasible solution before starting root optimization. Setting like this would help facilitate the initial ‚Äúfeasibilization‚Äù and hence expedite the imcubent searching.</li> <li>Set the solver option <b>symmetry breaking cuts</b> to <u>moderate level of symmetry breaking</u>:<br> <code class="language-plaintext highlighter-rouge">cpx.parameters.mip.strategy.symmetry.set(1)</code><br> <a href="https://en.wikipedia.org/wiki/Symmetry-breaking_constraints" rel="external nofollow noopener" target="_blank">Symmetry</a> in an optimization problem refers to cases where multiple equivalent solutions exist due to the interchangeable nature of variables, constraints, or other problem structures. A symmetry-breaking cut is a set of additional constraints to eliminate symmetric solutions without removing any feasible or optimal solutions, which could greatly reduce the searching effort.</li> </ul> <h4 id="does-the-solver-struggle-with-reducing-the-gap-at-the-final-stage">Does the solver struggle with reducing the gap at the final stage?</h4> <p>More often in solving large-scale MIP problems, the solver could spend hours reducing the gap from 5% to 1%, for example. This is because the solver does a bad job with fine-tuning the solution due to the diminishing returns of exploring the solution space as it approaches optimality. This issue is <em>de facto</em> one of the most common bottlenecks for large-scale MIP applications, not just UC, because of the <span class="dashed-popover" data-toggle="popover" data-placement="top" title="Weak LP relaxation; Diminishing marginal returns; Exponentional search space">natures of branch-and-cut</span>. It is also arguably the most difficult problems in tuning the solver. One might want to try with the following options:</p> <ul> <li>Set the solver option <b>relative MIP gap before starting to polish a solution</b> to <u>some low percentage value</u>:<br> <code class="language-plaintext highlighter-rouge">cpx.parameters.mip.tolerances.mipgappolish.set(0.1)</code><br> If the solver could easily reduce the gap at the beginning, there is no need to activate polishing at the early stage because of its computational intensity as discussed above. Sometimes it could be very effective in tightening the bounds later because of its strong neighbor refinement capability, which is very useful in later stages when the solver spends exponential efforts going over nodes.</li> <li>Set the solver option <b>node selection strategy</b> to <u>choose the most recently created node</u>:<br> <code class="language-plaintext highlighter-rouge">cpx.parameters.mip.strategy.nodeselect.set(0)</code><br> The default option for this one is choosing the unprocessed node with the best objective function for the associated LP relaxation. By setting it 0 commands the solver to choose the most recently created node, with the same reason of employing polishing.</li> </ul> <h3 id="some-possible-silver-bullets">Some Possible Silver Bullets</h3> <p>Sometimes the following options are elixirs that setting them correctly could work like magic, especially for <span class="dashed-popover" data-toggle="popover" data-placement="top" title="Problems with large differences in coefficient magnitudes and setting scaling is insufficient to work">ill-conditioned</span> MIP problems.</p> <ul> <li>Set the solver option <b>numerical emphasis</b> to <u>exercise extreme caution in computation</u>:<br> <code class="language-plaintext highlighter-rouge">cpx.parameters.emphasis.numerical.set(1)</code><br> Setting this commands the solver to focus on avoiding numerical issues, which may involve slower but more robust calculations, with consequent performance trade-offs in time and memory. By sacrificing the solution effort in handling nodal relaxation problems, the solver could achieve an overall better solution time for problems highly sensitive to numerical stability.</li> <li>Set the solver option <b>Markowitz tolerance</b> to <u>some tuned values</u>:<br> <code class="language-plaintext highlighter-rouge">cpx.parameters.simplex.tolerances.markowitz.set(0.0001)</code><br> This is a very interesting solver option. <a href="https://support.gurobi.com/hc/en-us/articles/14785877856145-What-does-the-Markowitz-tolerance-do" rel="external nofollow noopener" target="_blank">Markowitz tolerance</a> is used as a criterion to decide which pivot elements are acceptable for simplex algorithm that controls the numerical stability during the factorization of the basis matrices. It also impacts the MIP problem due to the intensive procedure of solving LP relaxations. For ill-conditioned MIP problems, tuning this value could sometimes be very effective. Though the default value of this one is 0.01, decreasing it could help when one observes frequent infeasible incumbents or slow convergence, while increasing it could save the day if one encounters out-of-memory in solving LP relaxations.</li> </ul> <h3 id="one-more-thing">One More Thing</h3> <p>There are still a huge bunch of solver options out there for solvers like CPLEX that this guide doesn‚Äôt touch. But I believe we have covered the most impactful ones. There are also some built-in tuning tools of these solvers, like <a href="https://www.ibm.com/support/pages/cplex-performance-tuning-mixed-integer-programs#Item2" rel="external nofollow noopener" target="_blank">CPLEX automatic tuning tool</a>, <a href="https://docs.gurobi.com/projects/optimizer/en/current/features/tuning.html" rel="external nofollow noopener" target="_blank">Gurobi parameter tuning tool</a>, and <a href="https://www.fico.com/fico-xpress-optimization/docs/dms2018-04/evalguide2/dhtml/eg2sec1_sec_eg2ssec12.html" rel="external nofollow noopener" target="_blank">FICO-Xpress tuner</a>. Personally speaking, I don‚Äôt usually find these tools useful, since they would yield very specific and non-generalizable solver options that works particularly for the one instance you test. They are also frustratingly empirical.</p> <p>Hope these recommendations give you a good start on tuning the solver. Have fun üëª</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> ¬© Copyright 2025 Shengfei "Gabriel" Yin, Ph.D.. Last updated: January 02, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?70d799092f862ad98c7876aa47712e20"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>